COMMENT	*SUDOKU SOLVER*

EXTRN	READ:FAR
EXTRN 	SOLVE:FAR
EXTRN	VALIDATE:FAR
EXTRN	PERROR:FAR

IF1
	INCLUDE C:\TASM\sudoku\sud_ct.mac
	INCLUDE C:\TASM\sudoku\sud_io.mac
ENDIF

DATA SEGMENT PARA PUBLIC 'DATA'
	T		DB	12
	MAP 	DB	MSIZE DUP('_'),'$'
	PMAP 	DD	MAP
	PATH	DB	'C:\TASM\sudoku\sudoku.txt',0
DATA ENDS

STACK1 SEGMENT PARA STACK 'STACK'
	DW 256 DUP(?)
STACK1 ENDS

CODE SEGMENT PARA PUBLIC 'CODE'
	START PROC FAR
		ASSUME CS:CODE,DS:DATA,SS:STACK1
		
		PUSH DS
		XOR AX,AX
		PUSH AX
		MOV AX,DATA
		MOV DS,AX
		
		LEA DX,PATH
		LEA BX,MAP
		CALL READ	

		MOV AX,DX
		CMP	AX,0
		JNE PERR
		
		LEA DX,MAP
		CALL VALIDATE
		CMP	AX,0
		JNE PERR

		LEA DX,MAP
		CALL SOLVE
		
		CMP AX,0
		JNE FINISHED
		MOV AX,ENOSOL
		JMP PERR
		
		FINISHED:
		PSTRING MAP
		RET
		
		PERR:
		CALL PERROR
		RET
	START ENDP
CODE ENDS

END START
